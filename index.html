<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora Genética Gecko Leopardo</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
select { margin: 5px; }
h2 { margin-top: 20px; }
.resultado { border: 1px solid #ccc; padding: 10px; min-height: 20px; margin-bottom: 10px; white-space: pre-wrap; }
</style>
</head>
<body>

<h1>Calculadora Genética Gecko Leopardo</h1>

<h2>Selecciona los progenitores</h2>
<label>Hembra:
<select id="hembra">
  <option value="">--Selecciona--</option>
</select>
</label>
<label>Macho:
<select id="macho">
  <option value="">--Selecciona--</option>
</select>
</label>

<h2>Resultados Genéticos</h2>
<div id="resultados" class="resultado"></div>

<h2>Combos logrados</h2>
<div id="combos" class="resultado"></div>

<h2>Rutas a combos</h2>
<div id="rutas" class="resultado"></div>

<h2>Líneas poligénicas</h2>
<div id="poligenicos" class="resultado"></div>

<script>
const progenitores = [
  { nombre: "Hembra1", linea: "Tremper", genes: { tremper: "visual", eclipse: "het", blizzard: "", patternless: "" } },
  { nombre: "Macho1", linea: "Tremper", genes: { tremper: "het", eclipse: "visual", blizzard: "", patternless: "het" } },
  { nombre: "Hembra2", linea: "Bell", genes: { bell: "visual", eclipse: "het", blizzard: "", patternless: "" } },
  { nombre: "Macho2", linea: "Rainwater", genes: { rainwater: "het", eclipse: "", blizzard: "", patternless: "" } },
  // Puedes agregar más progenitores aquí
];

// Definición completa de combos con línea albina
const combosDefinidos = [
  // Tremper Albino
  { nombre: "Raptor", linea: "Tremper", genes: ["tremper","eclipse","patternless"] },
  { nombre: "Aptor", linea: "Tremper", genes: ["tremper","eclipse","patternless"] },
  { nombre: "Ember", linea: "Tremper", genes: ["tremper","eclipse","patternless"] },
  { nombre: "Snowflake", linea: "Tremper", genes: ["mackSnow","tremper","eclipse","patternless"] },
  { nombre: "Blazing Blizzard", linea: "Tremper", genes: ["tremper","blizzard"] },
  { nombre: "Diablo Blanco", linea: "Tremper", genes: ["tremper","blizzard","eclipse"] },
  { nombre: "Nova", linea: "Tremper", genes: ["tremper","eclipse","enigma"] },
  { nombre: "Super Nova", linea: "Tremper", genes: ["superMack","tremper","eclipse","enigma"] },
  { nombre: "Dreamsickle", linea: "Tremper", genes: ["mackSnow","tremper","eclipse","enigma"] },

  // Bell Albino
  { nombre: "Radar", linea: "Bell", genes: ["bell","eclipse"] },
  { nombre: "Stealth", linea: "Bell", genes: ["snow","enigma","radar"] },
  { nombre: "Super Stealth", linea: "Bell", genes: ["superSnow","radar","enigma"] },
  { nombre: "White Knight", linea: "Bell", genes: ["bell","eclipse","blizzard"] },

  // Las Vegas / Rainwater
  { nombre: "Typhoon", linea: "Rainwater", genes: ["rainwater","eclipse"] },
  { nombre: "Cyclone", linea: "Rainwater", genes: ["rainwater","eclipse","patternless"] },

  // Poligénicos / Especiales
  { nombre: "BEE", linea: "Tremper", genes: ["enigma","eclipse"] },
  { nombre: "Black Hole", linea: "Tremper", genes: ["mackSnow","enigma","eclipse"] },
  { nombre: "Total Eclipse", linea: "Tremper", genes: ["superSnow","eclipse"] },
  { nombre: "Universe", linea: "Tremper", genes: ["superMack","eclipse","wy"] },
  { nombre: "Banana Blizzard", linea: "Tremper", genes: ["murphyPatternless","blizzard"] },
  { nombre: "Super Platinum", linea: "Tremper", genes: ["superMack","murphyPatternless"] }
];

// Inicializar selects
const hembraSelect = document.getElementById("hembra");
const machoSelect = document.getElementById("macho");
progenitores.forEach(p => {
  hembraSelect.innerHTML += `<option value="${p.nombre}">${p.nombre} (${p.linea})</option>`;
  machoSelect.innerHTML += `<option value="${p.nombre}">${p.nombre} (${p.linea})</option>`;
});

function calcular() {
  const hembra = progenitores.find(p => p.nombre === hembraSelect.value);
  const macho = progenitores.find(p => p.nombre === machoSelect.value);

  if (!hembra || !macho) {
    document.getElementById("resultados").innerText = "";
    document.getElementById("combos").innerText = "";
    document.getElementById("rutas").innerText = "";
    document.getElementById("poligenicos").innerText = "";
    return;
  }

  const resultados = {};
  const combosText = [];
  const rutasText = [];
  const poligenicosText = "Mandarin, Tangerine, Blood, Blood Inferno, Blood Electric, Tornado (informativo)";

  // Resultados genéticos: Recesivos / Codominantes / Dominantes
  const genes = {};
  for (const g in hembra.genes) {
    if (hembra.genes[g] || macho.genes[g]) {
      // Calculo simple de recesivos y codominantes
      const hVal = hembra.genes[g] || "";
      const mVal = macho.genes[g] || "";
      if (hVal === "visual" && mVal === "visual") resultados[g] = "visual";
      else if (hVal === "visual" && mVal === "het" || hVal === "het" && mVal === "visual") resultados[g] = "50% visual / 50% het";
      else if (hVal === "het" && mVal === "het") resultados[g] = "25% visual / 50% het";
      else if ((hVal === "visual" && !mVal) || (!hVal && mVal === "visual")) resultados[g] = "100% het";
      else if ((hVal === "het" && !mVal) || (!hVal && mVal === "het")) resultados[g] = "50% het";
      else resultados[g] = hVal || mVal;
    }
  }

  // Evaluar combos
  combosDefinidos.forEach(c => {
    if (c.linea === hembra.linea && c.linea === macho.linea) {
      let tiene = 0;
      c.genes.forEach(g => {
        if (genes[g] && genes[g] !== "") tiene++;
      });
      if (tiene > 0) {
        const porcentaje = ((tiene / c.genes.length) * 100).toFixed(1);
        if (porcentaje > 0) combosText.push(`${c.nombre} ≈ ${porcentaje}%`);
        if (tiene < c.genes.length) {
          const faltantes = c.genes.filter(g => !genes[g] || genes[g]==="").join(", ");
          rutasText.push(`${c.nombre} (faltan: ${faltantes}) [Genes del combo: ${c.genes.join(", ")}]`);
        }
      }
    }
  });

  document.getElementById("resultados").innerText = JSON.stringify(resultados, null, 2);
  document.getElementById("combos").innerText = combosText.join("\n") || "Ningún combo logrado";
  document.getElementById("rutas").innerText = rutasText.join("\n") || "Ninguna ruta disponible";
  document.getElementById("poligenicos").innerText = poligenicosText;
}

hembraSelect.addEventListener("change", calcular);
machoSelect.addEventListener("change", calcular);

</script>
</body>
</html>
