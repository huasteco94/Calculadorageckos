<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora Genética – Gecko Leopardo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#f5f5f5;padding:15px}
.section{background:#fff;padding:12px;margin-bottom:15px;border-radius:8px}
.row{display:flex;gap:10px}
.row select{flex:1}
.result{background:#eee;padding:8px;margin-top:6px;border-radius:6px}
button{width:100%;padding:12px;font-size:16px}
</style>
</head>

<body>

<h2>Calculadora Genética – Gecko Leopardo</h2>

<div class="section" id="genes"></div>

<button onclick="calcular()">Calcular Cruce</button>

<div class="section">
<h3>Resultados</h3>
<div id="resultados"></div>
<h3>Combos</h3>
<div id="combos"></div>
</div>

<script>
const genes = [
 ["tremper","Tremper Albino","rec"],
 ["bell","Bell Albino","rec"],
 ["rainwater","Rainwater Albino","rec"],
 ["eclipse","Eclipse","rec"],
 ["blizzard","Blizzard","rec"],
 ["murphy","Murphy Patternless","rec"],
 ["mack","Mack Snow","co"],
 ["giant","Giant","co"],
 ["enigma","Enigma","dom"],
 ["wy","White & Yellow","dom"]
];

const combosDef = [
 {nombre:"Raptor", req:["tremper","eclipse","murphy"]},
 {nombre:"Diablo Blanco", req:["tremper","blizzard","eclipse"]},
 {nombre:"Radar", req:["bell","eclipse"]},
 {nombre:"Typhoon", req:["rainwater","eclipse"]},
 {nombre:"Universe", req:["mack_super","eclipse","wy"]}
];

const gdiv=document.getElementById("genes");
genes.forEach(g=>{
gdiv.innerHTML+=`
<label>${g[1]}</label>
<div class="row">
<select id="${g[0]}_p">
<option value="normal">Padre</option>
<option value="het">Het</option>
<option value="visual">Visual</option>
<option value="super">Super</option>
<option value="present">Presente</option>
</select>
<select id="${g[0]}_m">
<option value="normal">Madre</option>
<option value="het">Het</option>
<option value="visual">Visual</option>
<option value="super">Super</option>
<option value="present">Presente</option>
</select>
</div>`;
});

function frac(p){return p===100?"4/4":p===75?"3/4":p===50?"2/4":p===25?"1/4":"";}

function recCalc(p,m){
if(p==="visual"&&m==="visual")return{v:100};
if((p==="visual"&&m==="het")||(p==="het"&&m==="visual"))return{v:50,h:50};
if(p==="het"&&m==="het")return{v:25,h:50};
if((p==="visual"&&m==="normal")||(p==="normal"&&m==="visual"))return{h:100};
if((p==="het"&&m==="normal")||(p==="normal"&&m==="het"))return{h:50};
return{};
}

function calcular(){
let res={},genesPresentes={};

genes.forEach(g=>{
const p=document.getElementById(g[0]+"_p").value;
const m=document.getElementById(g[0]+"_m").value;

if(g[2]==="rec"){
const r=recCalc(p,m);
if(Object.keys(r).length){
res[g[0]]=r;
if(r.v)genesPresentes[g[0]]=r.v;
}
}
if(g[2]==="co"){
if(p==="super"||m==="super"){res[g[0]]={super:true};genesPresentes[g[0]+"_super"]=100;}
else if(p!=="normal"||m!=="normal"){res[g[0]]={present:true};genesPresentes[g[0]]=50;}
}
if(g[2]==="dom"){
if(p==="present"||m==="present"){res[g[0]]={present:true};genesPresentes[g[0]]=50;}
}
});

mostrar(res,genesPresentes);
}

function mostrar(r,gp){
const d=document.getElementById("resultados");
const c=document.getElementById("combos");
d.innerHTML="";c.innerHTML="";

for(const g in r){
let t="";
if(r[g].v)t+=`${r[g].v}% Visual (${frac(r[g].v)})<br>`;
if(r[g].h)t+=`${r[g].h}% Het (${frac(r[g].h)})<br>`;
if(r[g].present)t+="Presente<br>";
if(r[g].super)t+="Super<br>";
d.innerHTML+=`<div class="result"><b>${g.toUpperCase()}</b><br>${t}</div>`;
}

combosDef.forEach(cb=>{
let ok=true,prob=1,faltan=[];
cb.req.forEach(rq=>{
if(!gp[rq]){ok=false;faltan.push(rq);}
else prob*=gp[rq]/100;
});
if(ok){
c.innerHTML+=`<div class="result">✔ ${cb.nombre} (~${Math.round(prob*100)}% ≈ 1 de ${Math.round(1/prob)})</div>`;
}else{
c.innerHTML+=`<div class="result">➜ Ruta a ${cb.nombre} (falta: ${faltan.join(", ")})</div>`;
}
});
}
</script>

</body>
</html>
