<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora Genética – Gecko Leopardo</title>

<style>
body {
  font-family: Arial, sans-serif;
  padding: 15px;
  background: #f2f2f2;
}
h1 { text-align: center; }

section {
  background: white;
  padding: 12px;
  margin-bottom: 15px;
  border-radius: 8px;
}

.gene {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 6px;
  margin-bottom: 8px;
}

.gene label {
  grid-column: 1 / 4;
  font-weight: bold;
}

select {
  width: 100%;
  padding: 4px;
}

button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
}

#resultado {
  white-space: pre-line;
  font-size: 14px;
}
</style>
</head>

<body>

<h1>Calculadora Genética – Gecko Leopardo</h1>

<section>
<h2>Genes Recesivos</h2>
<div id="recesivos"></div>
</section>

<section>
<h2>Genes Codominantes</h2>
<div id="codominantes"></div>
</section>

<section>
<h2>Genes Dominantes</h2>
<div id="dominantes"></div>
</section>

<button onclick="calcular()">Calcular Cruce</button>

<section>
<h2>Resultados</h2>
<div id="resultado"></div>
</section>

<script>
// ======================
// DEFINICIÓN DE GENES
// ======================

const genes = {
  recesivos: [
    { key:"tremper", label:"Tremper Albino" },
    { key:"bell", label:"Bell Albino" },
    { key:"rainwater", label:"Rainwater Albino" },
    { key:"eclipse", label:"Eclipse" },
    { key:"blizzard", label:"Blizzard" },
    { key:"murphy", label:"Murphy Patternless" }
  ],
  codominantes: [
    { key:"mack", label:"Mack Snow" },
    { key:"supermack", label:"Super Mack Snow" }
  ],
  dominantes: [
    { key:"enigma", label:"Enigma" },
    { key:"wy", label:"White & Yellow" }
  ]
};

// ======================
// UI
// ======================

function renderGenes(lista, contenedor, opciones) {
  const div = document.getElementById(contenedor);
  lista.forEach(g => {
    div.innerHTML += `
      <div class="gene">
        <label>${g.label}</label>
        <select id="${g.key}_padre">${opciones}</select>
        <select id="${g.key}_madre">${opciones}</select>
      </div>
    `;
  });
}

renderGenes(
  genes.recesivos,
  "recesivos",
  `<option value="normal">Normal</option>
   <option value="het">Het</option>
   <option value="visual">Visual</option>`
);

renderGenes(
  genes.codominantes,
  "codominantes",
  `<option value="ausente">Ausente</option>
   <option value="presente">Presente</option>`
);

renderGenes(
  genes.dominantes,
  "dominantes",
  `<option value="ausente">Ausente</option>
   <option value="presente">Presente</option>`
);

// ======================
// GENÉTICA
// ======================

function calcRecesivo(p, m) {
  if (p==="visual" && m==="visual") return { visual:100 };
  if ((p==="visual"&&m==="het")||(p==="het"&&m==="visual"))
    return { visual:50, het:50 };
  if (p==="het" && m==="het")
    return { visual:25, het:50, normal:25 };
  if ((p==="visual"&&m==="normal")||(p==="normal"&&m==="visual"))
    return { het:100 };
  return { normal:100 };
}

// ======================
// COMBOS
// ======================

const combos = [
  { nombre:"RAPTOR", requiere:{ tremper:"visual", eclipse:"visual", murphy:"visual" }},
  { nombre:"Diablo Blanco", requiere:{ tremper:"visual", blizzard:"visual", eclipse:"visual" },
    advertencia:"Eclipse puede quedar oculto por Blizzard" },
  { nombre:"Radar", requiere:{ bell:"visual", eclipse:"visual" }},
  { nombre:"Typhoon", requiere:{ rainwater:"visual", eclipse:"visual" }},
  { nombre:"Universe", requiere:{ supermack:"presente", eclipse:"visual", wy:"presente" },
    alias:"Galaxy" }
];

// ======================
// CÁLCULO
// ======================

function calcular() {
  let estado = {};
  let salida = "GENÉTICA RESULTANTE\n\n";

  genes.recesivos.forEach(g => {
    const p = document.getElementById(g.key+"_padre").value;
    const m = document.getElementById(g.key+"_madre").value;
    estado[g.key] = calcRecesivo(p,m);
    salida += `${g.label}: ${JSON.stringify(estado[g.key])}\n`;
  });

  genes.codominantes.concat(genes.dominantes).forEach(g => {
    const p = document.getElementById(g.key+"_padre").value;
    const m = document.getElementById(g.key+"_madre").value;
    estado[g.key] = (p==="presente"||m==="presente") ? "presente" : "ausente";
    salida += `${g.label}: ${estado[g.key]}\n`;
  });

  salida += "\nCOMBOS\n";

  combos.forEach(c => {
    let ok=true, faltan=[];
    for (let g in c.requiere) {
      if (c.requiere[g]==="visual" && !estado[g]?.visual) {
        ok=false; faltan.push(g);
      }
      if (c.requiere[g]==="presente" && estado[g]!=="presente") {
        ok=false; faltan.push(g);
      }
    }
    if (ok) {
      salida += `✅ ${c.nombre}`;
      if (c.alias) salida += ` (alias: ${c.alias})`;
      salida += "\n";
      if (c.advertencia) salida += `⚠️ ${c.advertencia}\n`;
    } else if (faltan.length < Object.keys(c.requiere).length) {
      salida += `↪ Ruta a ${c.nombre} (falta: ${faltan.join(", ")})\n`;
    }
  });

  document.getElementById("resultado").textContent = salida;
}
</script>

</body>
</html>
