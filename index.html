<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Calculadora Genética Gecko Leopardo</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
label { display: block; margin: 10px 0 5px; }
select { width: 200px; margin-bottom: 15px; }
h2 { margin-top: 30px; }
.result-box { border: 1px solid #ccc; padding: 10px; margin-top: 5px; min-height: 30px; }
</style>
</head>
<body>

<h1>Calculadora Genética Gecko Leopardo</h1>

<h2>Selecciona los progenitores</h2>
<div>
  <label for="father">Macho</label>
  <select id="father">
    <option value="">--Selecciona--</option>
    <option value="Tremper">Tremper</option>
    <option value="Bell">Bell</option>
    <option value="Rainwater">Rainwater</option>
  </select>

  <label for="mother">Hembra</label>
  <select id="mother">
    <option value="">--Selecciona--</option>
    <option value="Tremper">Tremper</option>
    <option value="Bell">Bell</option>
    <option value="Rainwater">Rainwater</option>
  </select>
</div>

<h2>Resultados Genéticos</h2>
<div id="results" class="result-box"></div>

<h2>Combos logrados</h2>
<div id="combos" class="result-box"></div>

<h2>Rutas a combos</h2>
<div id="routes" class="result-box"></div>

<h2>Líneas poligénicas</h2>
<div id="polygenic" class="result-box">Mandarin, Tangerine, Blood, Blood Inferno, Blood Electric, Tornado (informativo)</div>

<script>
// Definición de genes por tipo
const genes = {
  recesivos: ["Tremper", "Bell", "Rainwater", "Eclipse", "Blizzard", "Murphy Patternless"],
  codominantes: ["Mack Snow", "Giant", "Super Giant"],
  dominantes: ["Enigma", "W/Y"]
};

// Definición de combos
const combos = [
  {name:"Universe", genes:["Super Mack Snow","Eclipse","W/Y"], line:"Tremper"},
  {name:"Raptor", genes:["Tremper","Eclipse"], line:"Tremper"},
  {name:"Diablo Blanco", genes:["Tremper","Blizzard","Eclipse"], line:"Tremper"},
  {name:"Radar", genes:["Bell","Eclipse"], line:"Bell"},
  {name:"Typhoon", genes:["Rainwater","Eclipse"], line:"Rainwater"}
];

// Función para calcular porcentaje mendeliano
function calcPercent(fatherGenes, motherGenes) {
  let result = {};
  genes.recesivos.forEach(g => {
    let f = fatherGenes[g] || "";
    let m = motherGenes[g] || "";
    if(f=="" && m=="") return;
    if(f=="visual" && m=="visual") result[g]="100% visual";
    else if((f=="visual" && m=="het")||(f=="het" && m=="visual")) result[g]="50% visual / 50% het";
    else if(f=="het" && m=="het") result[g]="25% visual / 50% het";
    else if((f=="visual" && m=="")||(f=="" && m=="visual")) result[g]="100% het";
    else if((f=="het" && m=="")||(f=="" && m=="het")) result[g]="50% het";
  });
  genes.codominantes.forEach(g => {
    let f = fatherGenes[g] || "";
    let m = motherGenes[g] || "";
    if(f=="" && m=="") return;
    if(f=="presente" && m=="presente") result[g]="50% presente / 25% super";
    else if((f=="super" && m=="")||(f=="" && m=="super")) result[g]="100% presente";
    else if(f=="super" && m=="presente") result[g]="50% super / 50% presente";
    else if(f=="presente" && m=="") result[g]="50% presente";
  });
  genes.dominantes.forEach(g => {
    let f = fatherGenes[g] || "";
    let m = motherGenes[g] || "";
    if(f=="" && m=="") return;
    if(f=="presente" && m=="") result[g]="50% presente";
    else if(f=="" && m=="presente") result[g]="50% presente";
    else if(f=="presente" && m=="presente") result[g]="75% presente";
  });
  return result;
}

// Función para calcular combos posibles
function calcCombos(percentGenes, line) {
  let achieved = [];
  let routes = [];
  combos.forEach(c => {
    if(c.line!==line) return; // No mezcla albinos
    let count=0;
    let missing=[];
    c.genes.forEach(g=>{
      if(percentGenes[g]) count++;
      else missing.push(g);
    });
    if(count===c.genes.length) achieved.push(c.name);
    else if(count>0) routes.push(`${c.name} (falta: ${missing.join(", ")}, genes: ${c.genes.join(", ")})`);
  });
  return {achieved,routes};
}

// Función principal
function updateResults() {
  const fatherLine = document.getElementById("father").value;
  const motherLine = document.getElementById("mother").value;
  if(!fatherLine || !motherLine) return;

  // Prototipo de genes seleccionados para cada progenitor (puedes reemplazar con dropdowns por gen individuales)
  let fatherGenes = {};
  let motherGenes = {};
  
  genes.recesivos.forEach(g => fatherGenes[g]=fatherLine===g?"visual":fatherLine.includes(g)?"het":"");
  genes.recesivos.forEach(g => motherGenes[g]=motherLine===g?"visual":motherLine.includes(g)?"het":"");

  const percentGenes = calcPercent(fatherGenes, motherGenes);

  const line = fatherLine; // Usamos línea del padre como referencia de albino
  const comboResults = calcCombos(percentGenes, line);

  document.getElementById("results").textContent = JSON.stringify(percentGenes, null, 2);
  document.getElementById("combos").textContent = comboResults.achieved.length>0?comboResults.achieved.join(", "):"Ningún combo logrado";
  document.getElementById("routes").textContent = comboResults.routes.length>0?comboResults.routes.join("\n"):"Ninguna ruta disponible";
}

// Eventos
document.getElementById("father").addEventListener("change", updateResults);
document.getElementById("mother").addEventListener("change", updateResults);

</script>
</body>
</html>
