<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora Genética Gecko Leopardo</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  select { margin: 5px; }
  h2 { margin-top: 20px; }
  .resultado { border: 1px solid #ccc; padding: 10px; min-height: 20px; margin-bottom: 10px; }
</style>
</head>
<body>

<h1>Calculadora Genética Gecko Leopardo</h1>

<h2>Selecciona los progenitores</h2>
<label>Hembra:
<select id="hembra">
  <option value="">--Selecciona--</option>
</select>
</label>
<label>Macho:
<select id="macho">
  <option value="">--Selecciona--</option>
</select>
</label>

<h2>Resultados Genéticos</h2>
<div id="resultados" class="resultado"></div>

<h2>Combos logrados</h2>
<div id="combos" class="resultado"></div>

<h2>Rutas a combos</h2>
<div id="rutas" class="resultado"></div>

<h2>Líneas poligénicas</h2>
<div id="poligenicos" class="resultado"></div>

<script>
const progenitores = [
  { nombre: "Ejemplo1", linea: "Tremper", genes: { tremper: "visual", eclipse: "het", blizzard: "", patternless: "" } },
  { nombre: "Ejemplo2", linea: "Bell", genes: { bell: "visual", eclipse: "", blizzard: "", patternless: "" } },
  { nombre: "Ejemplo3", linea: "Rainwater", genes: { rainwater: "het", eclipse: "", blizzard: "", patternless: "" } }
];

// Combos definidos
const combosDefinidos = [
  { nombre: "Raptor", linea: "Tremper", genes: ["tremper","eclipse"] },
  { nombre: "Universe", linea: "Tremper", genes: ["superMack","eclipse","wy"] },
  { nombre: "Diablo Blanco", linea: "Tremper", genes: ["tremper","blizzard","eclipse"] },
  { nombre: "Nova", linea: "Tremper", genes: ["tremper","eclipse","enigma"] },
  { nombre: "Typhoon", linea: "Rainwater", genes: ["rainwater","eclipse"] },
  { nombre: "Radar", linea: "Bell", genes: ["bell","eclipse"] },
  // Agrega todos los combos que ya definimos antes
];

// Inicializar selects
const hembraSelect = document.getElementById("hembra");
const machoSelect = document.getElementById("macho");
progenitores.forEach(p => {
  hembraSelect.innerHTML += `<option value="${p.nombre}">${p.nombre} (${p.linea})</option>`;
  machoSelect.innerHTML += `<option value="${p.nombre}">${p.nombre} (${p.linea})</option>`;
});

function calcular() {
  const hembra = progenitores.find(p => p.nombre === hembraSelect.value);
  const macho = progenitores.find(p => p.nombre === machoSelect.value);

  if (!hembra || !macho) {
    document.getElementById("resultados").innerText = "";
    document.getElementById("combos").innerText = "";
    document.getElementById("rutas").innerText = "";
    document.getElementById("poligenicos").innerText = "";
    return;
  }

  // Resultados genéticos
  let resultadosText = "";
  let combosText = "";
  let rutasText = "";
  let poligenicosText = "Mandarin, Tangerine, Blood, Blood Inferno, Blood Electric, Tornado (informativo)";

  // Calcular recesivos, codominantes, dominantes
  const genes = { ...hembra.genes, ...macho.genes };
  resultadosText = JSON.stringify(genes, null, 2);

  // Evaluar combos
  combosDefinidos.forEach(c => {
    if (c.linea === hembra.linea && c.linea === macho.linea) {
      let tiene = 0;
      c.genes.forEach(g => {
        if (genes[g] && genes[g] !== "") tiene++;
      });
      if (tiene > 0) {
        const porcentaje = ((tiene / c.genes.length) * 100).toFixed(1);
        combosText += `${c.nombre} ≈ ${porcentaje}%\n`;
        // Generar ruta si no tiene todos
        if (tiene < c.genes.length) {
          const faltantes = c.genes.filter(g => !genes[g] || genes[g] === "").join(", ");
          rutasText += `${c.nombre} (faltan: ${faltantes}) [Genes del combo: ${c.genes.join(", ")}]\n`;
        }
      }
    }
  });

  document.getElementById("resultados").innerText = resultadosText;
  document.getElementById("combos").innerText = combosText || "Ningún combo logrado";
  document.getElementById("rutas").innerText = rutasText || "Ninguna ruta disponible";
  document.getElementById("poligenicos").innerText = poligenicosText;
}

hembraSelect.addEventListener("change", calcular);
machoSelect.addEventListener("change", calcular);
</script>

</body>
</html>
